#import "@preview/slydst:0.1.4": *
#import "@local/mercator:0.1.0"

#show: slides.with(
  title: "France maps",
  layout: "large",
  authors: "bernsteining",
)

#show image: it => {
  align(center, it)
}

// git clone https://github.com/gregoiredavid/france-geojson/
// md flat_geojson
// fd --extension geojson --exec cp {} flat_geojson
// ls | sed 's/.*/"&"/' | paste -sd, - | sed 's/^/[/;s/$/]/' | cb
// removed some empty geojsons (mainly france dom toms for some reason)
// enjoy

#let maps = ("arrondissements-01-ain.geojson","arrondissements-02-aisne.geojson","arrondissements-03-allier.geojson","arrondissements-04-alpes-de-haute-provence.geojson","arrondissements-05-hautes-alpes.geojson","arrondissements-06-alpes-maritimes.geojson","arrondissements-07-ardeche.geojson","arrondissements-08-ardennes.geojson","arrondissements-09-ariege.geojson","arrondissements-10-aube.geojson","arrondissements-11-aude.geojson","arrondissements-12-aveyron.geojson","arrondissements-13-bouches-du-rhone.geojson","arrondissements-14-calvados.geojson","arrondissements-15-cantal.geojson","arrondissements-16-charente.geojson","arrondissements-17-charente-maritime.geojson","arrondissements-18-cher.geojson","arrondissements-19-correze.geojson","arrondissements-21-cote-d-or.geojson","arrondissements-22-cotes-d-armor.geojson","arrondissements-23-creuse.geojson","arrondissements-24-dordogne.geojson","arrondissements-25-doubs.geojson","arrondissements-26-drome.geojson","arrondissements-27-eure.geojson","arrondissements-28-eure-et-loir.geojson","arrondissements-29-finistere.geojson","arrondissements-2A-corse-du-sud.geojson","arrondissements-2B-haute-corse.geojson","arrondissements-30-gard.geojson","arrondissements-31-haute-garonne.geojson","arrondissements-32-gers.geojson","arrondissements-33-gironde.geojson","arrondissements-34-herault.geojson","arrondissements-35-ille-et-vilaine.geojson","arrondissements-36-indre.geojson","arrondissements-37-indre-et-loire.geojson","arrondissements-38-isere.geojson","arrondissements-39-jura.geojson","arrondissements-40-landes.geojson","arrondissements-41-loir-et-cher.geojson","arrondissements-42-loire.geojson","arrondissements-43-haute-loire.geojson","arrondissements-44-loire-atlantique.geojson","arrondissements-45-loiret.geojson","arrondissements-46-lot.geojson","arrondissements-47-lot-et-garonne.geojson","arrondissements-48-lozere.geojson","arrondissements-49-maine-et-loire.geojson","arrondissements-50-manche.geojson","arrondissements-51-marne.geojson","arrondissements-52-haute-marne.geojson","arrondissements-53-mayenne.geojson","arrondissements-54-meurthe-et-moselle.geojson","arrondissements-55-meuse.geojson","arrondissements-56-morbihan.geojson","arrondissements-57-moselle.geojson","arrondissements-58-nievre.geojson","arrondissements-59-nord.geojson","arrondissements-60-oise.geojson","arrondissements-61-orne.geojson","arrondissements-62-pas-de-calais.geojson","arrondissements-63-puy-de-dome.geojson","arrondissements-64-pyrenees-atlantiques.geojson","arrondissements-65-hautes-pyrenees.geojson","arrondissements-66-pyrenees-orientales.geojson","arrondissements-67-bas-rhin.geojson","arrondissements-68-haut-rhin.geojson","arrondissements-69-rhone.geojson","arrondissements-70-haute-saone.geojson","arrondissements-71-saone-et-loire.geojson","arrondissements-72-sarthe.geojson","arrondissements-73-savoie.geojson","arrondissements-74-haute-savoie.geojson","arrondissements-75-paris.geojson","arrondissements-76-seine-maritime.geojson","arrondissements-77-seine-et-marne.geojson","arrondissements-78-yvelines.geojson","arrondissements-79-deux-sevres.geojson","arrondissements-80-somme.geojson","arrondissements-81-tarn.geojson","arrondissements-82-tarn-et-garonne.geojson","arrondissements-83-var.geojson","arrondissements-84-vaucluse.geojson","arrondissements-85-vendee.geojson","arrondissements-86-vienne.geojson","arrondissements-87-haute-vienne.geojson","arrondissements-88-vosges.geojson","arrondissements-89-yonne.geojson","arrondissements-90-territoire-de-belfort.geojson","arrondissements-91-essonne.geojson","arrondissements-92-hauts-de-seine.geojson","arrondissements-93-seine-saint-denis.geojson","arrondissements-94-val-de-marne.geojson","arrondissements-95-val-d-oise.geojson","arrondissements-971-guadeloupe.geojson","arrondissements-973-guyane.geojson","arrondissements-974-la-reunion.geojson","arrondissements-auvergne-rhone-alpes.geojson","arrondissements-avec-outre-mer.geojson","arrondissements-bourgogne-franche-comte.geojson","arrondissements-bretagne.geojson","arrondissements-centre-val-de-loire.geojson","arrondissements-corse.geojson","arrondissements.geojson","arrondissements-grand-est.geojson","arrondissements-guadeloupe.geojson","arrondissements-guyane.geojson","arrondissements-hauts-de-france.geojson","arrondissements-ile-de-france.geojson","arrondissements-la-reunion.geojson","arrondissements-normandie.geojson","arrondissements-nouvelle-aquitaine.geojson","arrondissements-occitanie.geojson","arrondissements-pays-de-la-loire.geojson","arrondissements-provence-alpes-cote-d-azur.geojson","arrondissements-version-simplifiee.geojson","cantons-01-ain.geojson","cantons-02-aisne.geojson","cantons-03-allier.geojson","cantons-04-alpes-de-haute-provence.geojson","cantons-05-hautes-alpes.geojson","cantons-06-alpes-maritimes.geojson","cantons-07-ardeche.geojson","cantons-08-ardennes.geojson","cantons-09-ariege.geojson","cantons-10-aube.geojson","cantons-11-aude.geojson","cantons-12-aveyron.geojson","cantons-13-bouches-du-rhone.geojson","cantons-14-calvados.geojson","cantons-15-cantal.geojson","cantons-16-charente.geojson","cantons-17-charente-maritime.geojson","cantons-18-cher.geojson","cantons-19-correze.geojson","cantons-21-cote-d-or.geojson","cantons-22-cotes-d-armor.geojson","cantons-23-creuse.geojson","cantons-24-dordogne.geojson","cantons-25-doubs.geojson","cantons-26-drome.geojson","cantons-27-eure.geojson","cantons-28-eure-et-loir.geojson","cantons-29-finistere.geojson","cantons-2A-corse-du-sud.geojson","cantons-2B-haute-corse.geojson","cantons-30-gard.geojson","cantons-31-haute-garonne.geojson","cantons-32-gers.geojson","cantons-33-gironde.geojson","cantons-34-herault.geojson","cantons-35-ille-et-vilaine.geojson","cantons-36-indre.geojson","cantons-37-indre-et-loire.geojson","cantons-38-isere.geojson","cantons-39-jura.geojson","cantons-40-landes.geojson","cantons-41-loir-et-cher.geojson","cantons-42-loire.geojson","cantons-43-haute-loire.geojson","cantons-44-loire-atlantique.geojson","cantons-45-loiret.geojson","cantons-46-lot.geojson","cantons-47-lot-et-garonne.geojson","cantons-48-lozere.geojson","cantons-49-maine-et-loire.geojson","cantons-50-manche.geojson","cantons-51-marne.geojson","cantons-52-haute-marne.geojson","cantons-53-mayenne.geojson","cantons-54-meurthe-et-moselle.geojson","cantons-55-meuse.geojson","cantons-56-morbihan.geojson","cantons-57-moselle.geojson","cantons-58-nievre.geojson","cantons-59-nord.geojson","cantons-60-oise.geojson","cantons-61-orne.geojson","cantons-62-pas-de-calais.geojson","cantons-63-puy-de-dome.geojson","cantons-64-pyrenees-atlantiques.geojson","cantons-65-hautes-pyrenees.geojson","cantons-66-pyrenees-orientales.geojson","cantons-67-bas-rhin.geojson","cantons-68-haut-rhin.geojson","cantons-69-rhone.geojson","cantons-70-haute-saone.geojson","cantons-71-saone-et-loire.geojson","cantons-72-sarthe.geojson","cantons-73-savoie.geojson","cantons-74-haute-savoie.geojson","cantons-76-seine-maritime.geojson","cantons-77-seine-et-marne.geojson","cantons-78-yvelines.geojson","cantons-79-deux-sevres.geojson","cantons-80-somme.geojson","cantons-81-tarn.geojson","cantons-82-tarn-et-garonne.geojson","cantons-83-var.geojson","cantons-84-vaucluse.geojson","cantons-85-vendee.geojson","cantons-86-vienne.geojson","cantons-87-haute-vienne.geojson","cantons-88-vosges.geojson","cantons-89-yonne.geojson","cantons-90-territoire-de-belfort.geojson","cantons-91-essonne.geojson","cantons-92-hauts-de-seine.geojson","cantons-93-seine-saint-denis.geojson","cantons-94-val-de-marne.geojson","cantons-95-val-d-oise.geojson","cantons-971-guadeloupe.geojson","cantons-974-la-reunion.geojson","cantons-976-mayotte.geojson","cantons-auvergne-rhone-alpes.geojson","cantons-avec-outre-mer.geojson","cantons-bourgogne-franche-comte.geojson","cantons-bretagne.geojson","cantons-centre-val-de-loire.geojson","cantons-corse.geojson","cantons.geojson","cantons-grand-est.geojson","cantons-guadeloupe.geojson","cantons-hauts-de-france.geojson","cantons-ile-de-france.geojson","cantons-la-reunion.geojson","cantons-mayotte.geojson","cantons-normandie.geojson","cantons-nouvelle-aquitaine.geojson","cantons-occitanie.geojson","cantons-pays-de-la-loire.geojson","cantons-provence-alpes-cote-d-azur.geojson","cantons-version-simplifiee.geojson","communes-01-ain.geojson","communes-02-aisne.geojson","communes-03-allier.geojson","communes-04-alpes-de-haute-provence.geojson","communes-05-hautes-alpes.geojson","communes-06-alpes-maritimes.geojson","communes-07-ardeche.geojson","communes-08-ardennes.geojson","communes-09-ariege.geojson","communes-10-aube.geojson","communes-11-aude.geojson","communes-12-aveyron.geojson","communes-13-bouches-du-rhone.geojson","communes-14-calvados.geojson","communes-15-cantal.geojson","communes-16-charente.geojson","communes-17-charente-maritime.geojson","communes-18-cher.geojson","communes-19-correze.geojson","communes-21-cote-d-or.geojson","communes-22-cotes-d-armor.geojson","communes-23-creuse.geojson","communes-24-dordogne.geojson","communes-25-doubs.geojson","communes-26-drome.geojson","communes-27-eure.geojson","communes-28-eure-et-loir.geojson","communes-29-finistere.geojson","communes-2A-corse-du-sud.geojson","communes-2B-haute-corse.geojson","communes-30-gard.geojson","communes-31-haute-garonne.geojson","communes-32-gers.geojson","communes-33-gironde.geojson","communes-34-herault.geojson","communes-35-ille-et-vilaine.geojson","communes-36-indre.geojson","communes-37-indre-et-loire.geojson","communes-38-isere.geojson","communes-39-jura.geojson","communes-40-landes.geojson","communes-41-loir-et-cher.geojson","communes-42-loire.geojson","communes-43-haute-loire.geojson","communes-44-loire-atlantique.geojson","communes-45-loiret.geojson","communes-46-lot.geojson","communes-47-lot-et-garonne.geojson","communes-48-lozere.geojson","communes-49-maine-et-loire.geojson","communes-50-manche.geojson","communes-51-marne.geojson","communes-52-haute-marne.geojson","communes-53-mayenne.geojson","communes-54-meurthe-et-moselle.geojson","communes-55-meuse.geojson","communes-56-morbihan.geojson","communes-57-moselle.geojson","communes-58-nievre.geojson","communes-59-nord.geojson","communes-60-oise.geojson","communes-61-orne.geojson","communes-62-pas-de-calais.geojson","communes-63-puy-de-dome.geojson","communes-64-pyrenees-atlantiques.geojson","communes-65-hautes-pyrenees.geojson","communes-66-pyrenees-orientales.geojson","communes-67-bas-rhin.geojson","communes-68-haut-rhin.geojson","communes-69-rhone.geojson","communes-70-haute-saone.geojson","communes-71-saone-et-loire.geojson","communes-72-sarthe.geojson","communes-73-savoie.geojson","communes-74-haute-savoie.geojson","communes-75-paris.geojson","communes-76-seine-maritime.geojson","communes-77-seine-et-marne.geojson","communes-78-yvelines.geojson","communes-79-deux-sevres.geojson","communes-80-somme.geojson","communes-81-tarn.geojson","communes-82-tarn-et-garonne.geojson","communes-83-var.geojson","communes-84-vaucluse.geojson","communes-85-vendee.geojson","communes-86-vienne.geojson","communes-87-haute-vienne.geojson","communes-88-vosges.geojson","communes-89-yonne.geojson","communes-90-territoire-de-belfort.geojson","communes-91-essonne.geojson","communes-92-hauts-de-seine.geojson","communes-93-seine-saint-denis.geojson","communes-94-val-de-marne.geojson","communes-95-val-d-oise.geojson","communes-971-guadeloupe.geojson","communes-972-martinique.geojson","communes-973-guyane.geojson","communes-974-la-reunion.geojson","communes-976-mayotte.geojson","communes-auvergne-rhone-alpes.geojson","communes-avec-outre-mer.geojson","communes-bourgogne-franche-comte.geojson","communes-bretagne.geojson","communes-centre-val-de-loire.geojson","communes-corse.geojson","communes.geojson","communes-grand-est.geojson","communes-guadeloupe.geojson","communes-guyane.geojson","communes-hauts-de-france.geojson","communes-ile-de-france.geojson","communes-la-reunion.geojson","communes-martinique.geojson","communes-mayotte.geojson","communes-normandie.geojson","communes-nouvelle-aquitaine.geojson","communes-occitanie.geojson","communes-pays-de-la-loire.geojson","communes-provence-alpes-cote-d-azur.geojson","communes-version-simplifiee.geojson", "departements-auvergne-rhone-alpes.geojson","departements-avec-outre-mer.geojson","departements-bourgogne-franche-comte.geojson","departements-bretagne.geojson","departements-centre-val-de-loire.geojson","departements-corse.geojson","departements.geojson","departements-grand-est.geojson","departements-guadeloupe.geojson","departements-guyane.geojson","departements-hauts-de-france.geojson","departements-ile-de-france.geojson","departements-la-reunion.geojson","departements-martinique.geojson","departements-mayotte.geojson","departements-normandie.geojson","departements-nouvelle-aquitaine.geojson","departements-occitanie.geojson","departements-pays-de-la-loire.geojson","departements-provence-alpes-cote-d-azur.geojson","departements-version-simplifiee.geojson","metropole-et-outre-mer.geojson","metropole.geojson","metropole-version-simplifiee.geojson","region-auvergne-rhone-alpes.geojson","region-bourgogne-franche-comte.geojson","region-bretagne.geojson","region-centre-val-de-loire.geojson","region-corse.geojson","region-grand-est.geojson","region-guadeloupe.geojson","region-guyane.geojson","region-hauts-de-france.geojson","region-ile-de-france.geojson","region-la-reunion.geojson","region-martinique.geojson","region-mayotte.geojson","region-normandie.geojson","region-nouvelle-aquitaine.geojson","region-occitanie.geojson","region-pays-de-la-loire.geojson","region-provence-alpes-cote-d-azur.geojson","regions-avant-redecoupage-2015.geojson","regions-avec-outre-mer.geojson","regions.geojson","regions-version-simplifiee.geojson")


#let config = json.encode((
  "stroke": "red",
  "stroke_width": 0.005,
  "fill": "white",
  "fill_opacity": 0.5,
  show_labels: false))

#for map in maps {
  let geo = read(
  "france_maps/" + map,
  encoding: "utf8",
)
  figure(mercator.render-map(geo, config, height: 70%), caption: map)
}